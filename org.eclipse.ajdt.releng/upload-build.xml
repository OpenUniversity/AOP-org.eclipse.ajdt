<?xml version="1.0"?>
<project name="ajdt-upload" basedir="." default="upload-and-unzip">
	<!-- note that this script requires jsch to be on the ant classpath in order to work
	     a version of this jar is included in the build_bundles directory. -->
	
	<property file="local.properties" />
	<property file="build.properties" />
	<property file="${build.dist}/ajdt-zip.properties" />

	<!-- ================================= 
          target: upload-build              
  		 ================================= -->
	<target name="upload-build" description="Uploads an AJDT zip archive to the download server">
		<scp todir="${upload.userid}:${upload.pwd}@${upload.host}:${upload.dir}" failonerror="true" trust="true" verbose="true">
			<fileset dir="${build.dist}">
				<include name="${zip.name}" />
			</fileset>
		</scp>
	</target>
	
	<!-- ================================= 
          target: delete-old              
       ================================= -->
  <target name="delete-old" description="Deletes the old version of the plugin">
  	<sshexec host="${host}" username="${upload.userid}" password="${upload.pwd}" command="rm -rf ${uploaddir}/plugins ${uploaddir}/features" failonerror="true" verbose="true" trust="true" />
  </target>

	<!-- ================================= 
          target: unzip-build              
       ================================= -->
	<target name="unzip-build" description="Unzips build on download server">
		<sshexec host="${host}" username="${upload.userid}" password="${upload.pwd}" command="unzip ${uploaddir}/${zip.name} -d ${uploaddir}" failonerror="true" trust="true" />
	</target>

	<!-- ================================= 
          target: upload-and-unzip              
       ================================= -->
	<target name="upload-and-unzip" depends="upload-build,unzip-build" description="Uploads, and unzips build on download server">
	</target>


</project>